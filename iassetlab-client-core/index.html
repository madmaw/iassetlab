<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>iAssetLab</title>

    <link rel="stylesheet" href="src/main/css/iassetlab.css">
    <link rel="stylesheet" href="src/main/css/jquery-ui-1.10.2/jquery-ui.css">
    <link rel="stylesheet" href="src/main/css/jquery-ui-1.10.2/jquery.ui.progressbar.css">
    <!-- sizes chosen so portrait/landscape will use the same set of assets on most iphones/ipads -->
    <link rel='stylesheet' media='screen and (max-width: 480px)' href='src/main/res/ios/320w.css' />
    <link rel='stylesheet' media='screen and (min-width: 481px) and (max-width: 1136px)' href='src/main/res/ios/640w.css' />
    <link rel='stylesheet' media='screen and (min-width: 1137px)' href='src/main/res/ios/1536w.css' />

    <script src="target/lib/handlebars-1.0.10.js"></script>
    <script src="target/lib/jquery-1.9.1.js"></script>
    <script src="target/lib/jquery-ui-1.10.2.js"></script>
    <script src="target/lib/rison-0.9.2.js"></script>
    <script src="target/lib/iassetlab-templa.js"></script>
    <script src="target/dist/iassetlab-client-core.js"></script>

    <script>
        window.onload = function () {
            var contentElement = document.getElementById("content");
            var assetLabControllerFactory = new iassetlab.client.core.AssetLabControllerFactory();
            var loadables = []
            assetLabControllerFactory.init(loadables);
            var assetLabController = assetLabControllerFactory.create();
            var loader = assetLabControllerFactory.wrapInLoader(loadables, assetLabController);

            var title = "iAssetLab";
            var getTitle = function () {
                var fullTitle = title;
                var controllerTitle = loader.getTitle();
                if (controllerTitle != null && controllerTitle != "") {
                    fullTitle += " - " + controllerTitle;
                }
                return fullTitle;
            }

            loader.addOnChangeListener(function (source, changeEvent) {
                if (changeEvent.titleChanged) {
                    document.title = getTitle();
                }
            });

            loader.init(new templa.mvc.element.DirectElementReference(contentElement));
            loader.start();
        };
    </script>
</head>
<body>
    <div id="content"></div>
</body>
</html>